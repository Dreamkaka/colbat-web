import{s as k,a as v,e as T,b as U,u as z,g as G,d as H,c as F}from"../chunks/scheduler.y4uHs2UB.js";import{S as M,i as N,c as $,a as g,m as d,t as c,b as m,d as p,e as K,s as w,u as V,f as L,g as Q,n as S,v as D,h as b,j as y,k as h,y as I,l as x,w as E,p as C,q}from"../chunks/index.Cysm1UDV.js";import{t as A}from"../chunks/translations.BVElcgx8.js";import{S as O,a as tt}from"../chunks/SettingsCategory.CtbTqUah.js";import{c as j,d as et}from"../chunks/download.CE4MlqSw.js";import{validateSettings as nt}from"../chunks/validate.Bpb5b3Xj.js";import{r as st,a as rt,l as R,u as ot}from"../chunks/settings.D2QZNL8x.js";import{A as W}from"../chunks/ActionButton.DTUw35pQ.js";import{I as X,g as Y,a as Z}from"../chunks/Icon.NybfZExb.js";import{F as at}from"../chunks/file-import.CeottGOO.js";function it(a){let t;const o=a[2].default,e=U(o,a,a[3],null);return{c(){e&&e.c()},l(s){e&&e.l(s)},m(s,n){e&&e.m(s,n),t=!0},p(s,n){e&&e.p&&(!t||n&8)&&z(e,o,s,s[3],t?H(o,s[3],n,null):G(s[3]),null)},i(s){t||(c(e,s),t=!0)},o(s){m(e,s),t=!1},d(s){e&&e.d(s)}}}function lt(a){let t,o;const e=[{type:"outline"},{name:"trash"},a[1],{iconNode:a[0]}];let s={$$slots:{default:[it]},$$scope:{ctx:a}};for(let n=0;n<e.length;n+=1)s=v(s,e[n]);return t=new X({props:s}),{c(){$(t.$$.fragment)},l(n){g(t.$$.fragment,n)},m(n,r){d(t,n,r),o=!0},p(n,[r]){const i=r&3?Y(e,[e[0],e[1],r&2&&Z(n[1]),r&1&&{iconNode:n[0]}]):{};r&8&&(i.$$scope={dirty:r,ctx:n}),t.$set(i)},i(n){o||(c(t.$$.fragment,n),o=!0)},o(n){m(t.$$.fragment,n),o=!1},d(n){p(t,n)}}}function ft(a,t,o){let{$$slots:e={},$$scope:s}=t;const n=[["path",{d:"M4 7l16 0"}],["path",{d:"M10 11l0 6"}],["path",{d:"M14 11l0 6"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"}]];return a.$$set=r=>{o(1,t=v(v({},t),T(r))),"$$scope"in r&&o(3,s=r.$$scope)},t=T(t),[n,t,e,s]}class ut extends M{constructor(t){super(),N(this,t,ft,lt,k,{})}}function ct(a){let t,o,e,s=a[0]("button.reset")+"",n,r,i,l;return o=new ut({}),{c(){t=K("button"),$(o.$$.fragment),e=w(),n=V(s),this.h()},l(f){t=L(f,"BUTTON",{id:!0,class:!0});var u=Q(t);g(o.$$.fragment,u),e=S(u),n=D(u,s),u.forEach(b),this.h()},h(){y(t,"id","setting-button-reset"),y(t,"class","button svelte-f37f5")},m(f,u){h(f,t,u),d(o,t,null),I(t,e),I(t,n),r=!0,i||(l=x(t,"click",a[1]),i=!0)},p(f,[u]){(!r||u&1)&&s!==(s=f[0]("button.reset")+"")&&E(n,s)},i(f){r||(c(o.$$.fragment,f),r=!0)},o(f){m(o.$$.fragment,f),r=!1},d(f){f&&b(t),p(o),i=!1,l()}}}function mt(a,t,o){let e;return F(a,A,n=>o(0,e=n)),[e,()=>{j({id:"wipe-confirm",type:"small",icon:"warn-red",title:e("dialog.reset.title"),bodyText:e("dialog.reset.body"),buttons:[{text:e("button.cancel"),main:!1,action:()=>{}},{text:e("button.reset"),color:"red",main:!0,timeout:2e3,action:()=>st()}]})}]}class $t extends M{constructor(t){super(),N(this,t,mt,ct,k,{})}}function gt(a){let t;const o=a[2].default,e=U(o,a,a[3],null);return{c(){e&&e.c()},l(s){e&&e.l(s)},m(s,n){e&&e.m(s,n),t=!0},p(s,n){e&&e.p&&(!t||n&8)&&z(e,o,s,s[3],t?H(o,s[3],n,null):G(s[3]),null)},i(s){t||(c(e,s),t=!0)},o(s){m(e,s),t=!1},d(s){e&&e.d(s)}}}function dt(a){let t,o;const e=[{type:"outline"},{name:"file-export"},a[1],{iconNode:a[0]}];let s={$$slots:{default:[gt]},$$scope:{ctx:a}};for(let n=0;n<e.length;n+=1)s=v(s,e[n]);return t=new X({props:s}),{c(){$(t.$$.fragment)},l(n){g(t.$$.fragment,n)},m(n,r){d(t,n,r),o=!0},p(n,[r]){const i=r&3?Y(e,[e[0],e[1],r&2&&Z(n[1]),r&1&&{iconNode:n[0]}]):{};r&8&&(i.$$scope={dirty:r,ctx:n}),t.$set(i)},i(n){o||(c(t.$$.fragment,n),o=!0)},o(n){m(t.$$.fragment,n),o=!1},d(n){p(t,n)}}}function pt(a,t,o){let{$$slots:e={},$$scope:s}=t;const n=[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}],["path",{d:"M11.5 21h-4.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v5m-5 6h7m-3 -3l3 3l-3 3"}]];return a.$$set=r=>{o(1,t=v(v({},t),T(r))),"$$scope"in r&&o(3,s=r.$$scope)},t=T(t),[n,t,e,s]}class _t extends M{constructor(t){super(),N(this,t,pt,dt,k,{})}}function bt(a){let t,o,e=a[1]("button.import")+"",s,n;return t=new at({}),{c(){$(t.$$.fragment),o=w(),s=V(e)},l(r){g(t.$$.fragment,r),o=S(r),s=D(r,e)},m(r,i){d(t,r,i),h(r,o,i),h(r,s,i),n=!0},p(r,i){(!n||i&2)&&e!==(e=r[1]("button.import")+"")&&E(s,e)},i(r){n||(c(t.$$.fragment,r),n=!0)},o(r){m(t.$$.fragment,r),n=!1},d(r){r&&(b(o),b(s)),p(t,r)}}}function J(a){let t,o;return t=new W({props:{id:"export-settings",click:a[3],$$slots:{default:[ht]},$$scope:{ctx:a}}}),{c(){$(t.$$.fragment)},l(e){g(t.$$.fragment,e)},m(e,s){d(t,e,s),o=!0},p(e,s){const n={};s&34&&(n.$$scope={dirty:s,ctx:e}),t.$set(n)},i(e){o||(c(t.$$.fragment,e),o=!0)},o(e){m(t.$$.fragment,e),o=!1},d(e){p(t,e)}}}function ht(a){let t,o,e=a[1]("button.export")+"",s,n;return t=new _t({}),{c(){$(t.$$.fragment),o=w(),s=V(e)},l(r){g(t.$$.fragment,r),o=S(r),s=D(r,e)},m(r,i){d(t,r,i),h(r,o,i),h(r,s,i),n=!0},p(r,i){(!n||i&2)&&e!==(e=r[1]("button.export")+"")&&E(s,e)},i(r){n||(c(t.$$.fragment,r),n=!0)},o(r){m(t.$$.fragment,r),n=!1},d(r){r&&(b(o),b(s)),p(t,r)}}}function P(a){let t,o;return t=new $t({}),{c(){$(t.$$.fragment)},l(e){g(t.$$.fragment,e)},m(e,s){d(t,e,s),o=!0},i(e){o||(c(t.$$.fragment,e),o=!0)},o(e){m(t.$$.fragment,e),o=!1},d(e){p(t,e)}}}function vt(a){let t,o,e,s,n;o=new W({props:{id:"import-settings",click:a[2],$$slots:{default:[bt]},$$scope:{ctx:a}}});let r=a[0].schemaVersion&&J(a),i=a[0].schemaVersion&&P();return{c(){t=K("div"),$(o.$$.fragment),e=w(),r&&r.c(),s=w(),i&&i.c(),this.h()},l(l){t=L(l,"DIV",{class:!0,id:!0});var f=Q(t);g(o.$$.fragment,f),e=S(f),r&&r.l(f),s=S(f),i&&i.l(f),f.forEach(b),this.h()},h(){y(t,"class","button-row svelte-ism1gp"),y(t,"id","settings-data-transfer")},m(l,f){h(l,t,f),d(o,t,null),I(t,e),r&&r.m(t,null),I(t,s),i&&i.m(t,null),n=!0},p(l,[f]){const u={};f&34&&(u.$$scope={dirty:f,ctx:l}),o.$set(u),l[0].schemaVersion?r?(r.p(l,f),f&1&&c(r,1)):(r=J(l),r.c(),c(r,1),r.m(t,s)):r&&(C(),m(r,1,1,()=>{r=null}),q()),l[0].schemaVersion?i?f&1&&c(i,1):(i=P(),i.c(),c(i,1),i.m(t,null)):i&&(C(),m(i,1,1,()=>{i=null}),q())},i(l){n||(c(o.$$.fragment,l),c(r),c(i),n=!0)},o(l){m(o.$$.fragment,l),m(r),m(i),n=!1},d(l){l&&b(t),p(o),r&&r.d(),i&&i.d()}}}function wt(a,t,o){let e,s;F(a,rt,l=>o(0,e=l)),F(a,A,l=>o(1,s=l));const n=l=>{var f;try{const u=(f=l.result)==null?void 0:f.toString();if(!u)throw s("error.import.no_data");const _=R(u);if(!nt(_))throw s("error.import.invalid");j({id:"import-confirm",type:"small",icon:"warn-red",title:s("dialog.safety.title"),bodyText:s("dialog.import.body"),buttons:[{text:s("button.cancel"),main:!1,action:()=>{}},{text:s("button.import"),color:"red",main:!0,timeout:5e3,action:()=>ot(R(u))}]})}catch(u){let _=s("error.import.no_data");u instanceof Error?(console.error("settings import error:",u),_=s("error.import.unknown",{value:u.message})):typeof u=="string"&&(_=u),j({id:"settings-import-error",type:"small",meowbalt:"error",bodyText:_,buttons:[{text:s("button.gotit"),main:!0,action:()=>{}}]})}};return[e,s,()=>{const l=document.createElement("input");l.type="file",l.accept=".json",l.onchange=f=>{var B;const u=f.target,_=new FileReader;_.onload=()=>n(_),((B=u.files)==null?void 0:B.length)===1&&_.readAsText(u.files[0])},l.click()},async()=>await et({file:new File([JSON.stringify(e,null,4)],"settings.json",{type:"application/json"})})]}class St extends M{constructor(t){super(),N(this,t,wt,vt,k,{})}}function kt(a){let t,o;return t=new tt({props:{settingContext:"advanced",settingId:"debug",title:a[0]("settings.advanced.debug.title"),description:a[0]("settings.advanced.debug.description")}}),{c(){$(t.$$.fragment)},l(e){g(t.$$.fragment,e)},m(e,s){d(t,e,s),o=!0},p(e,s){const n={};s&1&&(n.title=e[0]("settings.advanced.debug.title")),s&1&&(n.description=e[0]("settings.advanced.debug.description")),t.$set(n)},i(e){o||(c(t.$$.fragment,e),o=!0)},o(e){m(t.$$.fragment,e),o=!1},d(e){p(t,e)}}}function Mt(a){let t,o;return t=new St({}),{c(){$(t.$$.fragment)},l(e){g(t.$$.fragment,e)},m(e,s){d(t,e,s),o=!0},i(e){o||(c(t.$$.fragment,e),o=!0)},o(e){m(t.$$.fragment,e),o=!1},d(e){p(t,e)}}}function Nt(a){let t,o,e,s;return t=new O({props:{sectionId:"debug",title:a[0]("settings.advanced.debug"),$$slots:{default:[kt]},$$scope:{ctx:a}}}),e=new O({props:{sectionId:"data",title:a[0]("settings.advanced.data"),$$slots:{default:[Mt]},$$scope:{ctx:a}}}),{c(){$(t.$$.fragment),o=w(),$(e.$$.fragment)},l(n){g(t.$$.fragment,n),o=S(n),g(e.$$.fragment,n)},m(n,r){d(t,n,r),h(n,o,r),d(e,n,r),s=!0},p(n,[r]){const i={};r&1&&(i.title=n[0]("settings.advanced.debug")),r&3&&(i.$$scope={dirty:r,ctx:n}),t.$set(i);const l={};r&1&&(l.title=n[0]("settings.advanced.data")),r&2&&(l.$$scope={dirty:r,ctx:n}),e.$set(l)},i(n){s||(c(t.$$.fragment,n),c(e.$$.fragment,n),s=!0)},o(n){m(t.$$.fragment,n),m(e.$$.fragment,n),s=!1},d(n){n&&b(o),p(t,n),p(e,n)}}}function Tt(a,t,o){let e;return F(a,A,s=>o(0,e=s)),[e]}class qt extends M{constructor(t){super(),N(this,t,Tt,Nt,k,{})}}export{qt as component};
