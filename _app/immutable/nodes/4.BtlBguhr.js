import{s as X,i as Ae,c as Q,n as R,a as ge,e as ve,b as Be,u as He,g as Te,d as Se,r as Ze,H as ae,p as ue,G as be,t as Ne}from"../chunks/scheduler.y4uHs2UB.js";import{S as Y,i as x,e as y,c as z,f as A,g as $,a as U,h as f,j as o,k as M,m as O,l as te,t as L,b as F,d as K,u as J,v as W,y as p,w as G,s as N,n as P,B as ee,E as S,F as Z,D as $e,p as fe,q as ce,J as Ce,o as de,r as ye,I as Pe}from"../chunks/index.Cysm1UDV.js";import{t as ie}from"../chunks/translations.BVElcgx8.js";import{v as ke}from"../chunks/env.C2bSzLpJ.js";import{p as ze}from"../chunks/stores.CXfTTWCe.js";import{g as Ue}from"../chunks/meowbalt.DtU_1xQd.js";import{c as se,d as pe,b as Oe}from"../chunks/download.CE4MlqSw.js";import{link as ne}from"../chunks/omnibox.C56TUS5r.js";import{u as Ke}from"../chunks/settings.D2QZNL8x.js";import{b as je,t as qe,c as Re}from"../chunks/turnstile.BJf2cMOv.js";import{X as Je}from"../chunks/x.BN7WJZWw.js";import we from"../chunks/api.BDDPSeF4.js";import{S as We,a as me}from"../chunks/SettingsButton.CK5Xe92e.js";import{L as Ge}from"../chunks/link.C32hBJay.js";import{I as Qe,g as Xe,a as Ye,e as he}from"../chunks/Icon.NybfZExb.js";import{A as xe}from"../chunks/ActionButton.DTUw35pQ.js";import{M as et}from"../chunks/Meowbalt.n9LYO-On.js";import{getServerInfo as tt}from"../chunks/server-info.Dtq1Mxeq.js";import{S as lt}from"../chunks/Skeleton.iepKNwL3.js";import{P as nt}from"../chunks/plus.DrVkQ65T.js";function rt(i){let e,r,t,l,a,n;return r=new Je({}),{c(){e=y("button"),z(r.$$.fragment),this.h()},l(s){e=A(s,"BUTTON",{id:!0,"aria-label":!0,class:!0});var u=$(e);U(r.$$.fragment,u),u.forEach(f),this.h()},h(){o(e,"id","clear-button"),o(e,"aria-label",t=i[1]("a11y.save.clear_input")),o(e,"class","svelte-13zbj0a")},m(s,u){M(s,e,u),O(r,e,null),l=!0,a||(n=te(e,"click",function(){Ae(i[0])&&i[0].apply(this,arguments)}),a=!0)},p(s,[u]){i=s,(!l||u&2&&t!==(t=i[1]("a11y.save.clear_input")))&&o(e,"aria-label",t)},i(s){l||(L(r.$$.fragment,s),l=!0)},o(s){F(r.$$.fragment,s),l=!1},d(s){s&&f(e),K(r),a=!1,n()}}}function at(i,e,r){let t;Q(i,ie,a=>r(1,t=a));let{click:l}=e;return i.$$set=a=>{"click"in a&&r(0,l=a.click)},[l,t]}class st extends Y{constructor(e){super(),x(this,e,at,rt,X,{click:0})}}function it(i){let e,r,t,l,a;return{c(){e=y("button"),r=y("span"),t=J(i[4]),this.h()},l(n){e=A(n,"BUTTON",{id:!0,"aria-label":!0,class:!0});var s=$(e);r=A(s,"SPAN",{id:!0,class:!0});var u=$(r);t=W(u,i[4]),u.forEach(f),s.forEach(f),this.h()},h(){o(r,"id","download-state"),o(r,"class","svelte-m5le8h"),o(e,"id","download-button"),e.disabled=i[0],o(e,"aria-label",i[3]),o(e,"class","svelte-m5le8h")},m(n,s){M(n,e,s),p(e,r),p(r,t),l||(a=te(e,"click",i[7]),l=!0)},p(n,[s]){s&16&&G(t,n[4]),s&1&&(e.disabled=n[0]),s&8&&o(e,"aria-label",n[3])},i:R,o:R,d(n){n&&f(e),l=!1,a()}}}function ot(i,e,r){let t,l,a;Q(i,ie,_=>r(6,a=_));let{url:n}=e,{disabled:s=!1}=e,{loading:u=!1}=e,d={id:"save-error",type:"small",meowbalt:"error",buttons:[{text:a("button.gotit"),main:!0,action:()=>{}}]};const m=_=>{r(0,s=_!=="idle"),r(5,u=_==="think"||_==="check"),r(4,t={idle:">>",think:"...",check:"..?",done:">>>",error:"!!"}[_]),r(3,l=a({idle:"a11y.save.download",think:"a11y.save.download.think",check:"a11y.save.download.check",done:"a11y.save.download.done",error:"a11y.save.download.error"}[_])),["done","error"].includes(_)&&setTimeout(()=>m("idle"),1500)},c=async _=>{var D;m("think");const v=await we.request(_);if(!v)return m("error"),se({...d,bodyText:a("error.api.unreachable")});if(v.status==="error")return m("error"),se({...d,bodyText:a(v.error.code,(D=v==null?void 0:v.error)==null?void 0:D.context)});if(v.status==="redirect")return m("done"),pe({url:v.url,urlType:"redirect"});if(v.status==="tunnel")return m("check"),await we.probeCobaltTunnel(v.url)===200?(m("done"),pe({url:v.url})):(m("error"),se({...d,bodyText:a("error.tunnel.probe")}));if(v.status==="picker"){m("done");const B=[{text:a("button.done"),main:!0,action:()=>{}}];if(v.audio){const I=v.audio;B.unshift({text:a("button.download.audio"),main:!1,action:()=>{pe({url:I})}})}return se({id:"download-picker",type:"picker",items:v.picker,buttons:B})}return m("error"),se({...d,bodyText:a("error.api.unknown_response")})},b=()=>c(n);return i.$$set=_=>{"url"in _&&r(1,n=_.url),"disabled"in _&&r(0,s=_.disabled),"loading"in _&&r(5,u=_.loading)},i.$$.update=()=>{i.$$.dirty&64&&r(3,l=a("a11y.save.download"))},r(4,t=">>"),[s,n,c,l,t,u,a,b]}class ut extends Y{constructor(e){super(),x(this,e,ot,it,X,{url:1,disabled:0,loading:5,download:2})}get download(){return this.$$.ctx[2]}}function ft(i){let e;const r=i[2].default,t=Be(r,i,i[3],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,a){t&&t.m(l,a),e=!0},p(l,a){t&&t.p&&(!e||a&8)&&He(t,r,l,l[3],e?Se(r,l[3],a,null):Te(l[3]),null)},i(l){e||(L(t,l),e=!0)},o(l){F(t,l),e=!1},d(l){t&&t.d(l)}}}function ct(i){let e,r;const t=[{type:"outline"},{name:"loader-2"},i[1],{iconNode:i[0]}];let l={$$slots:{default:[ft]},$$scope:{ctx:i}};for(let a=0;a<t.length;a+=1)l=ge(l,t[a]);return e=new Qe({props:l}),{c(){z(e.$$.fragment)},l(a){U(e.$$.fragment,a)},m(a,n){O(e,a,n),r=!0},p(a,[n]){const s=n&3?Xe(t,[t[0],t[1],n&2&&Ye(a[1]),n&1&&{iconNode:a[0]}]):{};n&8&&(s.$$scope={dirty:n,ctx:a}),e.$set(s)},i(a){r||(L(e.$$.fragment,a),r=!0)},o(a){F(e.$$.fragment,a),r=!1},d(a){K(e,a)}}}function dt(i,e,r){let{$$slots:t={},$$scope:l}=e;const a=[["path",{d:"M12 3a9 9 0 1 0 9 9"}]];return i.$$set=n=>{r(1,e=ge(ge({},e),ve(n))),"$$scope"in n&&r(3,l=n.$$scope)},e=ve(e),[a,e,t,l]}class ht extends Y{constructor(e){super(),x(this,e,dt,ct,X,{})}}function pt(i){let e,r,t,l,a,n,s;return t=new ht({}),n=new Ge({}),{c(){e=y("div"),r=y("div"),z(t.$$.fragment),l=N(),a=y("div"),z(n.$$.fragment),this.h()},l(u){e=A(u,"DIV",{id:!0,class:!0});var d=$(e);r=A(d,"DIV",{class:!0});var m=$(r);U(t.$$.fragment,m),m.forEach(f),l=P(d),a=A(d,"DIV",{class:!0});var c=$(a);U(n.$$.fragment,c),c.forEach(f),d.forEach(f),this.h()},h(){o(r,"class","input-icon spinner-icon svelte-1288r1r"),o(a,"class","input-icon link-icon svelte-1288r1r"),o(e,"id","input-icons"),o(e,"class","svelte-1288r1r"),ee(e,"loading",i[0])},m(u,d){M(u,e,d),p(e,r),O(t,r,null),p(e,l),p(e,a),O(n,a,null),s=!0},p(u,[d]){(!s||d&1)&&ee(e,"loading",u[0])},i(u){s||(L(t.$$.fragment,u),L(n.$$.fragment,u),s=!0)},o(u){F(t.$$.fragment,u),F(n.$$.fragment,u),s=!1},d(u){u&&f(e),K(t),K(n)}}}function mt(i,e,r){let{loading:t}=e;return i.$$set=l=>{"loading"in l&&r(0,t=l.loading)},[t]}class gt extends Y{constructor(e){super(),x(this,e,mt,pt,X,{loading:0})}}function _t(i){let e,r,t,l;return{c(){e=S("svg"),r=S("path"),t=S("path"),l=S("path"),this.h()},l(a){e=Z(a,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var n=$(e);r=Z(n,"path",{d:!0,fill:!0}),$(r).forEach(f),t=Z(n,"path",{d:!0,fill:!0}),$(t).forEach(f),l=Z(n,"path",{d:!0,fill:!0}),$(l).forEach(f),n.forEach(f),this.h()},h(){o(r,"d","M7.80282 23H12.0122L13.0122 16L12.0122 9H7.80282C6.80707 9 6 9.84705 6 10.8921V21.1079C6 22.153 6.80707 23 7.80282 23ZM26 16.0232C26 17.7104 24.6322 19.0781 22.945 19.0781C21.2579 19.0781 19.8901 17.7104 19.8901 16.0232C19.8901 14.336 21.2579 12.9683 22.945 12.9683C24.6322 12.9683 26 14.336 26 16.0232Z"),o(r,"fill","#8C8C8C"),o(t,"d","M20.6106 26.8309L11.9976 23.0011L11.9976 9.01942L20.0474 5.23153C21.1704 4.70349 23.0356 5.2552 23.0356 6.49651V25.3045C23.0356 26.5512 21.7343 27.3705 20.6106 26.8309Z"),o(t,"fill","#C8C8C8"),o(l,"d","M24.9692 26.6519L5.1497 6.83167C4.68545 6.36742 4.68545 5.61418 5.1497 5.14994C5.61394 4.6857 6.36718 4.6857 6.83142 5.14994L26.6509 24.9694C27.1151 25.4337 27.1151 26.1869 26.6509 26.6511C26.1866 27.1161 25.4342 27.1161 24.9692 26.6519Z"),o(l,"fill","#F8312F"),o(e,"width","24"),o(e,"height","24"),o(e,"viewBox","0 0 32 32"),o(e,"fill","none"),o(e,"xmlns","http://www.w3.org/2000/svg")},m(a,n){M(a,e,n),p(e,r),p(e,t),p(e,l)},p:R,i:R,o:R,d(a){a&&f(e)}}}class vt extends Y{constructor(e){super(),x(this,e,null,_t,X,{})}}function bt(i){let e,r,t,l;return{c(){e=S("svg"),r=S("path"),t=S("path"),l=S("path"),this.h()},l(a){e=Z(a,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var n=$(e);r=Z(n,"path",{d:!0,fill:!0}),$(r).forEach(f),t=Z(n,"path",{d:!0,fill:!0}),$(t).forEach(f),l=Z(n,"path",{d:!0,fill:!0}),$(l).forEach(f),n.forEach(f),this.h()},h(){o(r,"d","M14.3599 3.00421L8.21995 3.80421C7.89995 3.84421 7.65995 4.12421 7.65995 4.44421V12.0642C7.08995 11.8642 6.45995 11.7842 5.79995 11.8542C3.74995 12.0742 2.12995 13.7742 1.99995 15.8342C1.83995 18.3242 3.80995 20.3842 6.26995 20.3842C8.62995 20.3842 10.5499 18.4742 10.5499 16.1042C10.5499 16.0142 10.5499 15.9242 10.5399 15.8342V8.00421C10.5399 7.72421 10.7499 7.48421 11.0299 7.44421L14.4899 6.99421C14.7499 6.96421 14.9499 6.73421 14.9499 6.46421V3.53421C14.9599 3.21421 14.6799 2.96421 14.3599 3.00421Z"),o(r,"fill","#7941A5"),o(t,"d","M29.4 5.37423L23.26 6.17423C22.94 6.21423 22.7 6.48423 22.7 6.80423V16.8142C22.13 16.6142 21.5 16.5342 20.84 16.6042C18.79 16.8242 17.17 18.5242 17.04 20.5842C16.88 23.0742 18.85 25.1342 21.31 25.1342C23.67 25.1342 25.59 23.2242 25.59 20.8542C25.59 20.7642 25.59 20.6742 25.58 20.5842V10.3742C25.58 10.0942 25.79 9.85423 26.07 9.81423L29.53 9.36423C29.8 9.32423 30 9.10424 30 8.83424V5.89423C30 5.57423 29.72 5.33423 29.4 5.37423Z"),o(t,"fill","#7941A5"),o(l,"d","M13.09 10.6543L19.23 9.85429C19.55 9.80429 19.83 10.0543 19.83 10.3743V13.3043C19.83 13.5743 19.63 13.8043 19.37 13.8343L15.91 14.2843C15.63 14.3243 15.42 14.5643 15.42 14.8443V25.0643C15.43 25.1543 15.43 25.2443 15.43 25.3343C15.43 27.7043 13.51 29.6143 11.15 29.6143C8.68995 29.6143 6.71995 27.5543 6.87995 25.0643C6.99995 23.0043 8.61995 21.3143 10.67 21.0943C11.33 21.0243 11.96 21.1043 12.53 21.3043V11.2943C12.53 10.9643 12.77 10.6943 13.09 10.6543Z"),o(l,"fill","#7941A5"),o(e,"width","24"),o(e,"height","24"),o(e,"viewBox","0 0 32 32"),o(e,"fill","none"),o(e,"xmlns","http://www.w3.org/2000/svg")},m(a,n){M(a,e,n),p(e,r),p(e,t),p(e,l)},p:R,i:R,o:R,d(a){a&&f(e)}}}class $t extends Y{constructor(e){super(),x(this,e,null,bt,X,{})}}function Ct(i){let e,r,t,l;return{c(){e=S("svg"),r=S("path"),t=S("path"),l=S("path"),this.h()},l(a){e=Z(a,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var n=$(e);r=Z(n,"path",{d:!0,fill:!0}),$(r).forEach(f),t=Z(n,"path",{d:!0,fill:!0}),$(t).forEach(f),l=Z(n,"path",{d:!0,fill:!0}),$(l).forEach(f),n.forEach(f),this.h()},h(){o(r,"d","M10.5194 7.0517C10.2265 6.93064 9.99626 6.69861 9.88117 6.41614L8.929 4.25725C8.75112 3.91425 8.23842 3.91425 8.071 4.25725L7.11883 6.41614C6.99327 6.69861 6.76308 6.92055 6.48057 7.0517L5.26682 7.57629C4.91106 7.74779 4.91106 8.24212 5.26682 8.41362L6.48057 8.93821C6.77354 9.05927 7.00374 9.2913 7.11883 9.57377L8.071 11.7427C8.24888 12.0858 8.76158 12.0858 8.929 11.7427L9.88117 9.57377C10.0067 9.2913 10.2369 9.06936 10.5194 8.93821L11.7332 8.41362C12.0889 8.24212 12.0889 7.74779 11.7332 7.57629L10.5194 7.0517Z"),o(r,"fill","#FFA514"),o(t,"d","M25.5744 13.5546C24.7045 13.1673 24.0166 12.4539 23.6525 11.5775L20.7897 4.81023C20.2637 3.72992 18.7363 3.72992 18.2103 4.81023L15.3475 11.5775C14.9733 12.4539 14.2854 13.1673 13.4256 13.5546L9.80419 15.1955C8.73194 15.7254 8.73194 17.2746 9.80419 17.8045L13.4256 19.4454C14.2955 19.8327 14.9834 20.5461 15.3475 21.4225L18.2103 28.1898C18.7363 29.2701 20.2637 29.2701 20.7897 28.1898L23.6525 21.4225C24.0267 20.5461 24.7146 19.8327 25.5744 19.4454L29.1958 17.8045C30.2681 17.2746 30.2681 15.7254 29.1958 15.1955L25.5744 13.5546Z"),o(t,"fill","#FFA514"),o(l,"d","M8.2811 20.3304C8.44173 20.7222 8.73465 21.0258 9.10315 21.2021L10.6528 21.927C11.1157 22.1621 11.1157 22.8379 10.6528 23.073L9.10315 23.7979C8.73465 23.9742 8.44173 24.2876 8.2811 24.6696L7.05276 27.6474C6.82598 28.1175 6.17402 28.1175 5.94724 27.6474L4.7189 24.6696C4.55827 24.2778 4.26535 23.9742 3.89685 23.7979L2.34724 23.073C1.88425 22.8379 1.88425 22.1621 2.34724 21.927L3.89685 21.2021C4.26535 21.0258 4.55827 20.7124 4.7189 20.3304L5.94724 17.3526C6.17402 16.8825 6.82598 16.8825 7.05276 17.3526L8.2811 20.3304Z"),o(l,"fill","#FFA514"),o(e,"width","24"),o(e,"height","24"),o(e,"viewBox","0 0 32 32"),o(e,"fill","none"),o(e,"xmlns","http://www.w3.org/2000/svg")},m(a,n){M(a,e,n),p(e,r),p(e,t),p(e,l)},p:R,i:R,o:R,d(a){a&&f(e)}}}class kt extends Y{constructor(e){super(),x(this,e,null,Ct,X,{})}}function wt(i){let e,r,t,l,a,n,s,u,d,m;return{c(){e=S("svg"),r=S("path"),t=S("rect"),l=S("path"),a=S("path"),n=S("path"),s=S("path"),u=S("path"),d=S("path"),m=S("path"),this.h()},l(c){e=Z(c,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var b=$(e);r=Z(b,"path",{d:!0,fill:!0}),$(r).forEach(f),t=Z(b,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,fill:!0}),$(t).forEach(f),l=Z(b,"path",{d:!0,fill:!0}),$(l).forEach(f),a=Z(b,"path",{d:!0,fill:!0}),$(a).forEach(f),n=Z(b,"path",{d:!0,fill:!0}),$(n).forEach(f),s=Z(b,"path",{d:!0,fill:!0}),$(s).forEach(f),u=Z(b,"path",{d:!0,fill:!0}),$(u).forEach(f),d=Z(b,"path",{d:!0,fill:!0}),$(d).forEach(f),m=Z(b,"path",{d:!0,fill:!0}),$(m).forEach(f),b.forEach(f),this.h()},h(){o(r,"d","M25.5 2H6.5C5.67157 2 5 2.67157 5 3.5V27.5C5 28.3284 5.67157 29 6.5 29H16.4244C16.795 29 17.1524 28.8628 17.4278 28.6149L26.5034 20.4469C26.8195 20.1624 27 19.7572 27 19.332V3.5C27 2.67157 26.3284 2 25.5 2Z"),o(r,"fill","#DA882F"),o(t,"x","7"),o(t,"y","4"),o(t,"width","18"),o(t,"height","23"),o(t,"rx","1"),o(t,"fill","#F5F5F5"),o(l,"d","M18 3C18 1.89543 17.1046 1 16 1C14.8954 1 14 1.89543 14 3H13C11.8954 3 11 3.89543 11 5V6.5C11 6.77614 11.2239 7 11.5 7H20.5C20.7761 7 21 6.77614 21 6.5V5C21 3.89543 20.1046 3 19 3H18ZM17 3C17 3.55228 16.5523 4 16 4C15.4477 4 15 3.55228 15 3C15 2.44772 15.4477 2 16 2C16.5523 2 17 2.44772 17 3Z"),o(l,"fill","#8F8F8F"),o(a,"d","M28 11C28.5523 11 29 11.4477 29 12V26L28.5 26.5L24 31H14C13.4477 31 13 30.5523 13 30V12C13 11.4477 13.4477 11 14 11H28Z"),o(a,"fill","#D9D9D9"),o(n,"d","M29 26H24.846C24.3788 26 24 26.3788 24 26.846V31C24.0914 30.9584 24.1755 30.9005 24.2478 30.8282L28.8282 26.2478C28.9005 26.1755 28.9584 26.0914 29 26Z"),o(n,"fill","#BDBDBD"),o(s,"d","M15 15.5C15 15.2239 15.1919 15 15.4286 15H26.5714C26.8081 15 27 15.2239 27 15.5C27 15.7761 26.8081 16 26.5714 16H15.4286C15.1919 16 15 15.7761 15 15.5Z"),o(s,"fill","#8F8F8F"),o(u,"d","M15 18.5C15 18.2239 15.1919 18 15.4286 18H26.5714C26.8081 18 27 18.2239 27 18.5C27 18.7761 26.8081 19 26.5714 19H15.4286C15.1919 19 15 18.7761 15 18.5Z"),o(u,"fill","#8F8F8F"),o(d,"d","M15.4286 21C15.1919 21 15 21.2239 15 21.5C15 21.7761 15.1919 22 15.4286 22H26.5714C26.8081 22 27 21.7761 27 21.5C27 21.2239 26.8081 21 26.5714 21H15.4286Z"),o(d,"fill","#8F8F8F"),o(m,"d","M15 24.5C15 24.2239 15.199 24 15.4444 24H22.5556C22.801 24 23 24.2239 23 24.5C23 24.7761 22.801 25 22.5556 25H15.4444C15.199 25 15 24.7761 15 24.5Z"),o(m,"fill","#8F8F8F"),o(e,"width","24"),o(e,"height","24"),o(e,"viewBox","0 0 32 32"),o(e,"fill","none"),o(e,"xmlns","http://www.w3.org/2000/svg")},m(c,b){M(c,e,b),p(e,r),p(e,t),p(e,l),p(e,a),p(e,n),p(e,s),p(e,u),p(e,d),p(e,m)},p:R,i:R,o:R,d(c){c&&f(e)}}}class Et extends Y{constructor(e){super(),x(this,e,null,wt,X,{})}}function Ee(i){let e,r=i[8]("save.label.community_instance")+"",t;return{c(){e=y("div"),t=J(r),this.h()},l(l){e=A(l,"DIV",{id:!0,class:!0});var a=$(e);t=W(a,r),a.forEach(f),this.h()},h(){o(e,"id","instance-label"),o(e,"class","svelte-1kokkg7")},m(l,a){M(l,e,a),p(e,t)},p(l,a){a&256&&r!==(r=l[8]("save.label.community_instance")+"")&&G(t,r)},d(l){l&&f(e)}}}function Le(i){let e,r;return e=new st({props:{click:i[21]}}),{c(){z(e.$$.fragment)},l(t){U(e.$$.fragment,t)},m(t,l){O(e,t,l),r=!0},p(t,l){const a={};l&128&&(a.click=t[21]),e.$set(a)},i(t){r||(L(e.$$.fragment,t),r=!0)},o(t){F(e.$$.fragment,t),r=!1},d(t){K(e,t)}}}function Ve(i){let e,r,t,l;function a(u){i[23](u)}function n(u){i[24](u)}let s={url:i[7]};return i[4]!==void 0&&(s.disabled=i[4]),i[5]!==void 0&&(s.loading=i[5]),e=new ut({props:s}),i[22](e),ue.push(()=>Ce(e,"disabled",a)),ue.push(()=>Ce(e,"loading",n)),{c(){z(e.$$.fragment)},l(u){U(e.$$.fragment,u)},m(u,d){O(e,u,d),l=!0},p(u,d){const m={};d&128&&(m.url=u[7]),!r&&d&16&&(r=!0,m.disabled=u[4],be(()=>r=!1)),!t&&d&32&&(t=!0,m.loading=u[5],be(()=>t=!1)),e.$set(m)},i(u){l||(L(e.$$.fragment,u),l=!0)},o(u){F(e.$$.fragment,u),l=!1},d(u){i[22](null),K(e,u)}}}function Lt(i){let e,r,t=i[8]("save.auto")+"",l,a;return e=new kt({}),{c(){z(e.$$.fragment),r=N(),l=J(t)},l(n){U(e.$$.fragment,n),r=P(n),l=W(n,t)},m(n,s){O(e,n,s),M(n,r,s),M(n,l,s),a=!0},p(n,s){(!a||s&256)&&t!==(t=n[8]("save.auto")+"")&&G(l,t)},i(n){a||(L(e.$$.fragment,n),a=!0)},o(n){F(e.$$.fragment,n),a=!1},d(n){n&&(f(r),f(l)),K(e,n)}}}function Vt(i){let e,r,t=i[8]("save.audio")+"",l,a;return e=new $t({}),{c(){z(e.$$.fragment),r=N(),l=J(t)},l(n){U(e.$$.fragment,n),r=P(n),l=W(n,t)},m(n,s){O(e,n,s),M(n,r,s),M(n,l,s),a=!0},p(n,s){(!a||s&256)&&t!==(t=n[8]("save.audio")+"")&&G(l,t)},i(n){a||(L(e.$$.fragment,n),a=!0)},o(n){F(e.$$.fragment,n),a=!1},d(n){n&&(f(r),f(l)),K(e,n)}}}function Ft(i){let e,r,t=i[8]("save.mute")+"",l,a;return e=new vt({}),{c(){z(e.$$.fragment),r=N(),l=J(t)},l(n){U(e.$$.fragment,n),r=P(n),l=W(n,t)},m(n,s){O(e,n,s),M(n,r,s),M(n,l,s),a=!0},p(n,s){(!a||s&256)&&t!==(t=n[8]("save.mute")+"")&&G(l,t)},i(n){a||(L(e.$$.fragment,n),a=!0)},o(n){F(e.$$.fragment,n),a=!1},d(n){n&&(f(r),f(l)),K(e,n)}}}function It(i){let e,r,t,l,a,n;return e=new me({props:{settingContext:"save",settingId:"downloadMode",settingValue:"auto",$$slots:{default:[Lt]},$$scope:{ctx:i}}}),t=new me({props:{settingContext:"save",settingId:"downloadMode",settingValue:"audio",$$slots:{default:[Vt]},$$scope:{ctx:i}}}),a=new me({props:{settingContext:"save",settingId:"downloadMode",settingValue:"mute",$$slots:{default:[Ft]},$$scope:{ctx:i}}}),{c(){z(e.$$.fragment),r=N(),z(t.$$.fragment),l=N(),z(a.$$.fragment)},l(s){U(e.$$.fragment,s),r=P(s),U(t.$$.fragment,s),l=P(s),U(a.$$.fragment,s)},m(s,u){O(e,s,u),M(s,r,u),O(t,s,u),M(s,l,u),O(a,s,u),n=!0},p(s,u){const d={};u&134217984&&(d.$$scope={dirty:u,ctx:s}),e.$set(d);const m={};u&134217984&&(m.$$scope={dirty:u,ctx:s}),t.$set(m);const c={};u&134217984&&(c.$$scope={dirty:u,ctx:s}),a.$set(c)},i(s){n||(L(e.$$.fragment,s),L(t.$$.fragment,s),L(a.$$.fragment,s),n=!0)},o(s){F(e.$$.fragment,s),F(t.$$.fragment,s),F(a.$$.fragment,s),n=!1},d(s){s&&(f(r),f(l)),K(e,s),K(t,s),K(a,s)}}}function Mt(i){let e,r,t,l=i[8]("save.paste")+"",a,n,s,u=i[8]("save.paste.long")+"",d,m;return e=new Et({}),{c(){z(e.$$.fragment),r=N(),t=y("span"),a=J(l),n=N(),s=y("span"),d=J(u),this.h()},l(c){U(e.$$.fragment,c),r=P(c),t=A(c,"SPAN",{id:!0,class:!0});var b=$(t);a=W(b,l),b.forEach(f),n=P(c),s=A(c,"SPAN",{id:!0,class:!0});var _=$(s);d=W(_,u),_.forEach(f),this.h()},h(){o(t,"id","paste-desktop-text"),o(t,"class","svelte-1kokkg7"),o(s,"id","paste-mobile-text"),o(s,"class","svelte-1kokkg7")},m(c,b){O(e,c,b),M(c,r,b),M(c,t,b),p(t,a),M(c,n,b),M(c,s,b),p(s,d),m=!0},p(c,b){(!m||b&256)&&l!==(l=c[8]("save.paste")+"")&&G(a,l),(!m||b&256)&&u!==(u=c[8]("save.paste.long")+"")&&G(d,u)},i(c){m||(L(e.$$.fragment,c),m=!0)},o(c){F(e.$$.fragment,c),m=!1},d(c){c&&(f(r),f(t),f(n),f(s)),K(e,c)}}}function Dt(i){let e=ke.DEFAULT_API||!i[0].url.host.endsWith(".cobalt.tools")&&i[0].url.host!=="cobalt.tools",r,t,l,a,n,s,u,d,m,c,b=i[9](i[7]),_,v,D,B,I,H,T,q,C=e&&Ee(i);a=new gt({props:{loading:i[5]||i[6]}});let E=i[7]&&!i[5]&&Le(i),w=b&&Ve(i);return D=new We({props:{$$slots:{default:[It]},$$scope:{ctx:i}}}),I=new xe({props:{id:"paste",click:i[10],$$slots:{default:[Mt]},$$scope:{ctx:i}}}),{c(){C&&C.c(),r=N(),t=y("div"),l=y("div"),z(a.$$.fragment),n=N(),s=y("input"),m=N(),E&&E.c(),c=N(),w&&w.c(),_=N(),v=y("div"),z(D.$$.fragment),B=N(),z(I.$$.fragment),this.h()},l(g){C&&C.l(g),r=P(g),t=A(g,"DIV",{id:!0,class:!0});var h=$(t);l=A(h,"DIV",{id:!0,class:!0});var V=$(l);U(a.$$.fragment,V),n=P(V),s=A(V,"INPUT",{id:!0,spellcheck:!0,autocomplete:!0,autocapitalize:!0,maxlength:!0,placeholder:!0,"aria-label":!0,"data-form-type":!0,class:!0}),m=P(V),E&&E.l(V),c=P(V),w&&w.l(V),V.forEach(f),_=P(h),v=A(h,"DIV",{id:!0,class:!0});var j=$(v);U(D.$$.fragment,j),B=P(j),U(I.$$.fragment,j),j.forEach(f),h.forEach(f),this.h()},h(){o(s,"id","link-area"),o(s,"spellcheck","false"),o(s,"autocomplete","off"),o(s,"autocapitalize","off"),o(s,"maxlength","512"),o(s,"placeholder",u=i[8]("save.input.placeholder")),o(s,"aria-label",d=i[6]?i[8]("a11y.save.link_area.turnstile"):i[8]("a11y.save.link_area")),o(s,"data-form-type","other"),s.disabled=i[4],o(s,"class","svelte-1kokkg7"),o(l,"id","input-container"),o(l,"class","svelte-1kokkg7"),ee(l,"focused",i[3]),ee(l,"downloadable",i[9](i[7])),o(v,"id","action-container"),o(v,"class","svelte-1kokkg7"),o(t,"id","omnibox"),o(t,"class","svelte-1kokkg7")},m(g,h){C&&C.m(g,h),M(g,r,h),M(g,t,h),p(t,l),O(a,l,null),p(l,n),p(l,s),$e(s,i[7]),i[17](s),p(l,m),E&&E.m(l,null),p(l,c),w&&w.m(l,null),p(t,_),p(t,v),O(D,v,null),p(v,B),O(I,v,null),H=!0,T||(q=[te(window,"keydown",i[11]),te(s,"input",i[16]),te(s,"input",i[18]),te(s,"focus",i[19]),te(s,"blur",i[20])],T=!0)},p(g,[h]){h&1&&(e=ke.DEFAULT_API||!g[0].url.host.endsWith(".cobalt.tools")&&g[0].url.host!=="cobalt.tools"),e?C?C.p(g,h):(C=Ee(g),C.c(),C.m(r.parentNode,r)):C&&(C.d(1),C=null);const V={};h&96&&(V.loading=g[5]||g[6]),a.$set(V),(!H||h&256&&u!==(u=g[8]("save.input.placeholder")))&&o(s,"placeholder",u),(!H||h&320&&d!==(d=g[6]?g[8]("a11y.save.link_area.turnstile"):g[8]("a11y.save.link_area")))&&o(s,"aria-label",d),(!H||h&16)&&(s.disabled=g[4]),h&128&&s.value!==g[7]&&$e(s,g[7]),g[7]&&!g[5]?E?(E.p(g,h),h&160&&L(E,1)):(E=Le(g),E.c(),L(E,1),E.m(l,c)):E&&(fe(),F(E,1,1,()=>{E=null}),ce()),h&128&&(b=g[9](g[7])),b?w?(w.p(g,h),h&128&&L(w,1)):(w=Ve(g),w.c(),L(w,1),w.m(l,null)):w&&(fe(),F(w,1,1,()=>{w=null}),ce()),(!H||h&8)&&ee(l,"focused",g[3]),(!H||h&640)&&ee(l,"downloadable",g[9](g[7]));const j={};h&134217984&&(j.$$scope={dirty:h,ctx:g}),D.$set(j);const le={};h&134217984&&(le.$$scope={dirty:h,ctx:g}),I.$set(le)},i(g){H||(L(a.$$.fragment,g),L(E),L(w),L(D.$$.fragment,g),L(I.$$.fragment,g),H=!0)},o(g){F(a.$$.fragment,g),F(E),F(w),F(D.$$.fragment,g),F(I.$$.fragment,g),H=!1},d(g){g&&(f(r),f(t)),C&&C.d(g),K(a),i[17](null),E&&E.d(),w&&w.d(),K(D),K(I),T=!1,Ze(q)}}}function yt(i,e,r){let t,l,a,n,s,u,d,m,c;Q(i,ne,k=>r(7,n=k)),Q(i,Oe,k=>r(25,s=k)),Q(i,ze,k=>r(0,u=k)),Q(i,je,k=>r(14,d=k)),Q(i,qe,k=>r(15,m=k)),Q(i,ie,k=>r(8,c=k));let b,_,v=!1,D=!1,B=!1;const I=k=>{try{return/^https:/i.test(new URL(k).protocol)}catch{}},H=()=>{s.length>0||D||B||navigator.clipboard.readText().then(async k=>{let re=k.match(/https:\/\/[^\s]+/g);re&&(ae(ne,n=re[0],n),t||(await Ne(),_.download(n)))})},T=k=>{Ke({save:{downloadMode:k}})},q=k=>{if(!(!b||s.length>0||D||B)&&((k.metaKey||k.ctrlKey||k.key==="/")&&b.focus(),k.key==="Enter"&&I(n)&&v&&_.download(n),["Escape","Clear"].includes(k.key)&&v&&ae(ne,n="",n),k.target!==b))switch(k.key){case"D":H();break;case"J":T("auto");break;case"K":T("audio");break;case"L":T("mute");break}};function C(){n=this.value,ne.set(n)}function E(k){ue[k?"unshift":"push"](()=>{b=k,r(1,b)})}const w=()=>r(3,v=!0),g=()=>r(3,v=!0),h=()=>r(3,v=!1),V=()=>ae(ne,n="",n);function j(k){ue[k?"unshift":"push"](()=>{_=k,r(2,_)})}function le(k){D=k,r(4,D)}function oe(k){B=k,r(5,B)}return i.$$.update=()=>{i.$$.dirty&49152&&r(6,t=m&&!d),i.$$.dirty&1&&r(13,l=u.url.hash.replace("#","")||""),i.$$.dirty&1&&r(12,a=u.url.searchParams.get("u")||""),i.$$.dirty&12288&&(l||a)&&(I(l)?ae(ne,n=l,n):I(a)&&ae(ne,n=a,n),Ue("/",{replaceState:!0}))},[u,b,_,v,D,B,t,n,c,I,H,q,a,l,d,m,C,E,w,g,h,V,j,le,oe]}class At extends Y{constructor(e){super(),x(this,e,yt,Dt,X,{})}}function Fe(i,e,r){const t=i.slice();return t[10]=e[r],t}function Ie(i,e,r){const t=i.slice();return t[7]=e[r],t}function Bt(i){let e,r,t=he({length:17}),l=[];for(let n=0;n<t.length;n+=1)l[n]=Me(Fe(i,t,n));const a=n=>F(l[n],1,1,()=>{l[n]=null});return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=de()},l(n){for(let s=0;s<l.length;s+=1)l[s].l(n);e=de()},m(n,s){for(let u=0;u<l.length;u+=1)l[u]&&l[u].m(n,s);M(n,e,s),r=!0},p(n,s){if(s&0){t=he({length:17});let u;for(u=0;u<t.length;u+=1){const d=Fe(n,t,u);l[u]?(l[u].p(d,s),L(l[u],1)):(l[u]=Me(),l[u].c(),L(l[u],1),l[u].m(e.parentNode,e))}for(fe(),u=t.length;u<l.length;u+=1)a(u);ce()}},i(n){if(!r){for(let s=0;s<t.length;s+=1)L(l[s]);r=!0}},o(n){l=l.filter(Boolean);for(let s=0;s<l.length;s+=1)F(l[s]);r=!1},d(n){n&&f(e),ye(l,n)}}}function Ht(i){let e,r=he(i[0]),t=[];for(let l=0;l<r.length;l+=1)t[l]=De(Ie(i,r,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=de()},l(l){for(let a=0;a<t.length;a+=1)t[a].l(l);e=de()},m(l,a){for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(l,a);M(l,e,a)},p(l,a){if(a&1){r=he(l[0]);let n;for(n=0;n<r.length;n+=1){const s=Ie(l,r,n);t[n]?t[n].p(s,a):(t[n]=De(s),t[n].c(),t[n].m(e.parentNode,e))}for(;n<t.length;n+=1)t[n].d(1);t.length=r.length}},i:R,o:R,d(l){l&&f(e),ye(t,l)}}}function Me(i){let e,r;return e=new lt({props:{class:"elevated",width:Math.random()*44+50+"px",height:"24.5px"}}),{c(){z(e.$$.fragment)},l(t){U(e.$$.fragment,t)},m(t,l){O(e,t,l),r=!0},p:R,i(t){r||(L(e.$$.fragment,t),r=!0)},o(t){F(e.$$.fragment,t),r=!1},d(t){K(e,t)}}}function De(i){let e,r=i[7]+"",t;return{c(){e=y("div"),t=J(r),this.h()},l(l){e=A(l,"DIV",{class:!0});var a=$(e);t=W(a,r),a.forEach(f),this.h()},h(){o(e,"class","service-item svelte-1l4yskn")},m(l,a){M(l,e,a),p(e,t)},p(l,a){a&1&&r!==(r=l[7]+"")&&G(t,r)},d(l){l&&f(e)}}}function Tt(i){let e,r,t,l,a,n,s=i[3]("save.services.title")+"",u,d,m,c,b,_,v,D,B,I=i[3]("save.services.disclaimer")+"",H,T,q,C;l=new nt({});const E=[Ht,Bt],w=[];function g(h,V){return h[1]?0:1}return _=g(i),v=w[_]=E[_](i),{c(){e=y("div"),r=y("button"),t=y("div"),z(l.$$.fragment),a=N(),n=y("span"),u=J(s),m=N(),c=y("div"),b=y("div"),v.c(),D=N(),B=y("div"),H=J(I),this.h()},l(h){e=A(h,"DIV",{id:!0,class:!0});var V=$(e);r=A(V,"BUTTON",{id:!0,"aria-label":!0,class:!0});var j=$(r);t=A(j,"DIV",{class:!0});var le=$(t);U(l.$$.fragment,le),le.forEach(f),a=P(j),n=A(j,"SPAN",{class:!0});var oe=$(n);u=W(oe,s),oe.forEach(f),j.forEach(f),m=P(V),c=A(V,"DIV",{id:!0,class:!0});var k=$(c);b=A(k,"DIV",{id:!0,class:!0});var re=$(b);v.l(re),re.forEach(f),D=P(k),B=A(k,"DIV",{id:!0,class:!0});var _e=$(B);H=W(_e,I),_e.forEach(f),k.forEach(f),V.forEach(f),this.h()},h(){o(t,"class","expand-icon svelte-1l4yskn"),o(n,"class","title"),o(r,"id","services-button"),o(r,"aria-label",d=i[3](`save.services.title_${i[2]?"hide":"show"}`)),o(r,"class","svelte-1l4yskn"),ee(r,"expanded",i[2]),o(b,"id","services-container"),o(b,"class","svelte-1l4yskn"),o(B,"id","services-disclaimer"),o(B,"class","subtext svelte-1l4yskn"),o(c,"id","services-popover"),o(c,"class","svelte-1l4yskn"),ee(c,"expanded",i[2]),o(e,"id","supported-services"),o(e,"class","svelte-1l4yskn")},m(h,V){M(h,e,V),p(e,r),p(r,t),O(l,t,null),p(r,a),p(r,n),p(n,u),p(e,m),p(e,c),p(c,b),w[_].m(b,null),p(c,D),p(c,B),p(B,H),T=!0,q||(C=te(r,"click",i[5]),q=!0)},p(h,[V]){(!T||V&8)&&s!==(s=h[3]("save.services.title")+"")&&G(u,s),(!T||V&12&&d!==(d=h[3](`save.services.title_${h[2]?"hide":"show"}`)))&&o(r,"aria-label",d),(!T||V&4)&&ee(r,"expanded",h[2]);let j=_;_=g(h),_===j?w[_].p(h,V):(fe(),F(w[j],1,1,()=>{w[j]=null}),ce(),v=w[_],v?v.p(h,V):(v=w[_]=E[_](h),v.c()),L(v,1),v.m(b,null)),(!T||V&8)&&I!==(I=h[3]("save.services.disclaimer")+"")&&G(H,I),(!T||V&4)&&ee(c,"expanded",h[2])},i(h){T||(L(l.$$.fragment,h),L(v),T=!0)},o(h){F(l.$$.fragment,h),F(v),T=!1},d(h){h&&f(e),K(l),w[_].d(),q=!1,C()}}}function St(i,e,r){let t,l,a,n;Q(i,Re,m=>r(6,a=m)),Q(i,ie,m=>r(3,n=m));let s=[];const u=async()=>{await tt(),a&&(r(1,l=!0),r(0,s=a.info.cobalt.services))},d=async()=>{r(2,t=!t),t&&s.length===0&&await u()};return r(2,t=!1),r(1,l=!1),[s,l,t,n,u,d]}class Zt extends Y{constructor(e){super(),x(this,e,St,Tt,X,{})}}function Nt(i){let e,r,t,l,a,n,s,u,d,m,c,b,_,v=i[0]("save.terms.note.agreement")+"",D,B,I,H=i[0]("save.terms.note.link")+"",T,q;return document.title=e=i[0]("general.cobalt"),n=new Zt({}),d=new et({props:{emotion:"smile"}}),c=new At({}),{c(){r=y("meta"),l=N(),a=y("div"),z(n.$$.fragment),s=N(),u=y("main"),z(d.$$.fragment),m=N(),z(c.$$.fragment),b=N(),_=y("div"),D=J(v),B=N(),I=y("a"),T=J(H),this.h()},l(C){const E=Pe("svelte-1rvzcsd",document.head);r=A(E,"META",{property:!0,content:!0}),E.forEach(f),l=P(C),a=A(C,"DIV",{id:!0,class:!0});var w=$(a);U(n.$$.fragment,w),s=P(w),u=A(w,"MAIN",{id:!0,tabindex:!0,"data-first-focus":!0,"data-focus-ring-hidden":!0,class:!0});var g=$(u);U(d.$$.fragment,g),m=P(g),U(c.$$.fragment,g),g.forEach(f),b=P(w),_=A(w,"DIV",{id:!0,class:!0});var h=$(_);D=W(h,v),B=P(h),I=A(h,"A",{href:!0});var V=$(I);T=W(V,H),V.forEach(f),h.forEach(f),w.forEach(f),this.h()},h(){o(r,"property","og:title"),o(r,"content",t=i[0]("general.cobalt")),o(u,"id","cobalt-save"),o(u,"tabindex","-1"),o(u,"data-first-focus",""),o(u,"data-focus-ring-hidden",""),o(u,"class","svelte-5x22zy"),o(I,"href","/about/terms"),o(_,"id","terms-note"),o(_,"class","svelte-5x22zy"),o(a,"id","cobalt-save-container"),o(a,"class","center-column-container svelte-5x22zy")},m(C,E){p(document.head,r),M(C,l,E),M(C,a,E),O(n,a,null),p(a,s),p(a,u),O(d,u,null),p(u,m),O(c,u,null),p(a,b),p(a,_),p(_,D),p(_,B),p(_,I),p(I,T),q=!0},p(C,[E]){(!q||E&1)&&e!==(e=C[0]("general.cobalt"))&&(document.title=e),(!q||E&1&&t!==(t=C[0]("general.cobalt")))&&o(r,"content",t),(!q||E&1)&&v!==(v=C[0]("save.terms.note.agreement")+"")&&G(D,v),(!q||E&1)&&H!==(H=C[0]("save.terms.note.link")+"")&&G(T,H)},i(C){q||(L(n.$$.fragment,C),L(d.$$.fragment,C),L(c.$$.fragment,C),q=!0)},o(C){F(n.$$.fragment,C),F(d.$$.fragment,C),F(c.$$.fragment,C),q=!1},d(C){C&&(f(l),f(a)),f(r),K(n),K(d),K(c)}}}function Pt(i,e,r){let t;return Q(i,ie,l=>r(0,t=l)),[t]}class sl extends Y{constructor(e){super(),x(this,e,Pt,Nt,X,{})}}export{sl as component};
