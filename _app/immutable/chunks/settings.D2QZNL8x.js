import{r as O,d as h}from"./index.CdrgBhix.js";import{defaultLocale as _}from"./translations.BVElcgx8.js";const g=e=>{if(typeof e=="object"&&e!==null){if(typeof Object.getPrototypeOf=="function"){const t=Object.getPrototypeOf(e);return t===Object.prototype||t===null}return Object.prototype.toString.call(e)==="[object Object]"}return!1},r=(...e)=>e.reduce((t,a)=>{if(Array.isArray(a))throw new TypeError("Arguments provided to ts-deepmerge must be objects, not arrays.");return Object.keys(a).forEach(o=>{["__proto__","constructor","prototype"].includes(o)||(Array.isArray(t[o])&&Array.isArray(a[o])?t[o]=r.options.mergeArrays?r.options.uniqueArrayItems?Array.from(new Set(t[o].concat(a[o]))):[...t[o],...a[o]]:a[o]:g(t[o])&&g(a[o])?t[o]=r(t[o],a[o]):t[o]=a[o]===void 0?r.options.allowUndefinedOverrides?a[o]:t[o]:a[o])}),t},{}),l={allowUndefinedOverrides:!0,mergeArrays:!0,uniqueArrayItems:!0};r.options=l;r.withOptions=(e,...t)=>{r.options=Object.assign(Object.assign({},l),e);const a=r(...t);return r.options=l,a};const w={theme:["auto","light","dark"],vCodec:["h264","av1","vp9"],vQuality:["720","max","2160","1440","1080","480","360","240","144"],aFormat:["mp3","best","ogg","wav","opus"],filenamePattern:["classic","pretty","basic","nerdy"]},p=e=>{const t=localStorage.getItem(e);if(t!==null)return t},n=e=>{const t=p(e);if(t!==void 0)return t==="true"},i=e=>{const t=p(e);if(t===void 0)return;if(w[e].includes(t))return t},j=()=>n("muteAudio")?"mute":n("audioMode")?"audio":"auto",A=()=>{for(const e of Object.keys(localStorage))e!=="plausible_ignore"&&localStorage.removeItem(e)},b=()=>{if(i("vCodec")===void 0)return;const e={schemaVersion:2,appearance:{theme:i("theme"),reduceTransparency:n("reduceTransparency"),reduceMotion:n("disableAnimations")},privacy:{disableAnalytics:n("plausible_ignore")},save:{youtubeVideoCodec:i("vCodec"),videoQuality:i("vQuality"),audioFormat:i("aFormat"),downloadMode:j(),filenameStyle:i("filenamePattern"),tiktokFullAudio:n("fullTikTokAudio"),tiktokH265:n("tiktokH265"),disableMetadata:n("disableMetadata"),youtubeDubBrowserLang:n("ytDub")}};return A(),e},C=Object.freeze(Object.defineProperty({__proto__:null,migrateOldSettings:b},Symbol.toStringTag,{value:"Module"})),u={schemaVersion:4,advanced:{debug:!1},appearance:{theme:"auto",language:_,autoLanguage:!0,reduceMotion:!1,reduceTransparency:!1},save:{audioBitrate:"128",audioFormat:"mp3",disableMetadata:!1,downloadMode:"auto",filenameStyle:"classic",savingMethod:"download",tiktokH265:!1,tiktokFullAudio:!1,twitterGif:!0,videoQuality:"1080",youtubeVideoCodec:"h264",youtubeDubLang:"original",youtubeHLS:!1},privacy:{alwaysProxy:!1,disableAnalytics:!1},processing:{customInstanceURL:"",customApiKey:"",enableCustomInstances:!1,enableCustomApiKey:!1,seenCustomWarning:!1}},F=Object.freeze(Object.defineProperty({__proto__:null,default:u},Symbol.toStringTag,{value:"Module"})),s=["original","af","am","ar","as","az","be","bg","bn","bs","ca","cs","da","de","el","en","es","et","eu","fa","fi","fil","fr","gl","gu","hi","hr","hu","hy","id","is","it","iw","ja","ka","kk","km","kn","ko","ky","lo","lt","lv","mk","ml","mn","mr","ms","my","no","ne","nl","or","pa","pl","pt","ro","ru","si","sk","sl","sq","sr","sv","sw","ta","te","th","tr","uk","ur","uz","vi","zh-CN","zh-HK","zh-TW","zu"],L=()=>s.reduce((e,t)=>{let o=`${new Intl.DisplayNames([t],{type:"language"}).of(t)} (${t})`;return t==="original"&&(o=t),{...e,[t]:o}},{}),y=()=>{if(typeof navigator>"u")return"original";const e=navigator.language;if(s.includes(e))return e;const t=e.split("-")[0];return s.includes(t)?t:"original"},B=Object.freeze(Object.defineProperty({__proto__:null,getBrowserLanguage:y,namedYoutubeLanguages:L,youtubeLanguages:s},Symbol.toStringTag,{value:"Module"})),m={3:e=>{const t=e;return t.schemaVersion=3,e!=null&&e.save&&"youtubeDubBrowserLang"in e.save&&(e.save.youtubeDubBrowserLang&&(t.save.youtubeDubLang=y()),delete e.save.youtubeDubBrowserLang),t},4:e=>{const t=e;return t.schemaVersion=4,e!=null&&e.processing&&("allowDefaultOverride"in e.processing&&delete e.processing.allowDefaultOverride,"seenOverrideWarning"in e.processing&&delete e.processing.seenOverrideWarning),t}},c=e=>Object.keys(m).map(Number).filter(t=>t>e.schemaVersion).reduce((t,a)=>m[a](t),e),N=Object.freeze(Object.defineProperty({__proto__:null,migrate:c},Symbol.toStringTag,{value:"Module"})),M=e=>{var t;(t=e.privacy)!=null&&t.disableAnalytics?localStorage.setItem("plausible_ignore","true"):localStorage.getItem("plausible_ignore")!==null&&localStorage.removeItem("plausible_ignore")},d=e=>(localStorage.setItem("settings",JSON.stringify(e)),e),I=()=>{const e=localStorage.getItem("settings");if(!e){const t=b();return t?d(c(t)):{}}return v(e)},v=e=>{const t=JSON.parse(e);return t.schemaVersion<u.schemaVersion?d(c(t)):t};let f;const T=e=>r(u,e),S=O(I(),(e,t)=>{f=t});function V(e){f(t=>{const a=d(r(t,e,{schemaVersion:u.schemaVersion}));return M(e),a})}function D(){f(()=>(localStorage.removeItem("settings"),{}))}const P=h(S,e=>T(e)),H=Object.freeze(Object.defineProperty({__proto__:null,default:P,loadFromString:v,resetSettings:D,storedSettings:S,updateSetting:V},Symbol.toStringTag,{value:"Module"}));export{S as a,F as b,B as c,u as d,N as e,H as f,v as l,C as m,L as n,D as r,P as s,V as u,s as y};
