import{_ as c}from"./preload-helper.D7HrI6pR.js";import{w as E,d as w}from"./index.CdrgBhix.js";import{h as f}from"./scheduler.y4uHs2UB.js";import{l as ce}from"./i18n_languages.json.C6QiP7u4.js";var de=Object.defineProperty,pe=Object.defineProperties,fe=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertySymbols,X=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable,q=(e,a,t)=>a in e?de(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,d=(e,a)=>{for(var t in a||(a={}))X.call(a,t)&&q(e,t,a[t]);if(I)for(var t of I(a))Y.call(a,t)&&q(e,t,a[t]);return e},y=(e,a)=>pe(e,fe(a)),P=(e,a)=>{var t={};for(var r in e)X.call(e,r)&&a.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&I)for(var r of I(e))a.indexOf(r)<0&&Y.call(e,r)&&(t[r]=e[r]);return t},C=["error","warn","debug"],Z=({logger:e=console,level:a=C[1],prefix:t="[i18n]: "})=>C.reduce((r,i,o)=>y(d({},r),{[i]:l=>C.indexOf(a)>=o&&e[i](`${t}${l}`)}),{}),p=Z({}),he=e=>{p=e},W=e=>{var a=e,{parser:t,key:r,params:i,translations:o,locale:l,fallbackLocale:n}=a,u=P(a,["parser","key","params","translations","locale","fallbackLocale"]);if(!r)return p.warn(`No translation key provided ('${l}' locale). Skipping translation...`),"";if(!l)return p.warn(`No locale provided for '${r}' key. Skipping translation...`),"";let s=(o[l]||{})[r];if(n&&s===void 0&&(p.debug(`No translation provided for '${r}' key in locale '${l}'. Trying fallback '${n}'`),s=(o[n]||{})[r]),s===void 0){if(p.debug(`No translation provided for '${r}' key in fallback '${n}'.`),u.hasOwnProperty("fallbackValue"))return u.fallbackValue;p.warn(`No translation nor fallback found for '${r}' .`)}return t.parse(s,i,l,r)},b=(...e)=>e.length?e.filter(a=>!!a).map(a=>{let t=`${a}`.toLowerCase();try{let[r]=Intl.Collator.supportedLocalesOf(a);if(!r)throw new Error;t=r}catch{p.warn(`'${a}' locale is non-standard.`)}return t}):[],D=(e,a,t)=>{if(a&&Array.isArray(e))return e.map(r=>D(r,a));if(e&&typeof e=="object"){let r=Object.keys(e).reduce((i,o)=>{let l=e[o],n=t?`${t}.${o}`:`${o}`;return l&&typeof l=="object"&&!(a&&Array.isArray(l))?d(d({},i),D(l,a,n)):y(d({},i),{[n]:D(l,a)})},{});return Object.keys(r).length?r:null}return e},me=e=>e.reduce((a,{key:t,data:r,locale:i})=>{if(!r)return a;let[o]=b(i),l=y(d({},a[o]||{}),{[t]:r});return y(d({},a),{[o]:l})},{}),ve=async e=>{try{let a=await Promise.all(e.map(t=>{var r=t,{loader:i}=r,o=P(r,["loader"]);return new Promise(async l=>{let n;try{n=await i()}catch(u){p.error(`Failed to load translation. Verify your '${o.locale}' > '${o.key}' Loader.`),p.error(u)}l(y(d({loader:i},o),{data:n}))})}));return me(a)}catch(a){p.error(a)}return{}},ye=e=>a=>{try{if(typeof a=="string")return a===e;if(typeof a=="object")return a.test(e)}catch{p.error("Invalid route config!")}return!1},B=(e,a)=>{let t=!0;try{t=Object.keys(e).filter(r=>e[r]!==void 0).every(r=>e[r]===a[r])}catch{}return t},G=1e3*60*60*24,ge=class{constructor(a){this.cachedAt=0,this.loadedKeys={},this.currentRoute=E(),this.config=E(),this.isLoading=E(!1),this.promises=new Set,this.loading={subscribe:this.isLoading.subscribe,toPromise:(t,r)=>{let{fallbackLocale:i}=f(this.config),o=Array.from(this.promises).filter(l=>{let n=B({locale:b(t)[0],route:r},l);return i&&(n=n||B({locale:b(i)[0],route:r},l)),n}).map(({promise:l})=>l);return Promise.all(o)},get:()=>f(this.isLoading)},this.privateRawTranslations=E({}),this.rawTranslations={subscribe:this.privateRawTranslations.subscribe,get:()=>f(this.rawTranslations)},this.privateTranslations=E({}),this.translations={subscribe:this.privateTranslations.subscribe,get:()=>f(this.translations)},this.locales=y(d({},w([this.config,this.privateTranslations],([t,r])=>{if(!t)return[];let{loaders:i=[]}=t,o=i.map(({locale:n})=>n),l=Object.keys(r).map(n=>n);return Array.from(new Set([...b(...o),...b(...l)]))},[])),{get:()=>f(this.locales)}),this.internalLocale=E(),this.loaderTrigger=w([this.internalLocale,this.currentRoute],([t,r],i)=>{var o,l;t!==void 0&&r!==void 0&&!(t===((o=f(this.loaderTrigger))==null?void 0:o[0])&&r===((l=f(this.loaderTrigger))==null?void 0:l[1]))&&(p.debug("Triggering translation load..."),i([t,r]))},[]),this.localeHelper=E(),this.locale={subscribe:this.localeHelper.subscribe,forceSet:this.localeHelper.set,set:this.internalLocale.set,update:this.internalLocale.update,get:()=>f(this.locale)},this.initialized=w([this.locale,this.currentRoute,this.privateTranslations],([t,r,i],o)=>{f(this.initialized)||o(t!==void 0&&r!==void 0&&!!Object.keys(i).length)}),this.translation=w([this.privateTranslations,this.locale,this.isLoading],([t,r,i],o)=>{let l=t[r];l&&Object.keys(l).length&&!i&&o(l)},{}),this.t=y(d({},w([this.config,this.translation],t=>{var[r]=t,i=r,{parser:o,fallbackLocale:l}=i,n=P(i,["parser","fallbackLocale"]);return(u,...s)=>W(d({parser:o,key:u,params:s,translations:this.translations.get(),locale:this.locale.get(),fallbackLocale:l},n.hasOwnProperty("fallbackValue")?{fallbackValue:n.fallbackValue}:{}))})),{get:(t,...r)=>f(this.t)(t,...r)}),this.l=y(d({},w([this.config,this.translations],t=>{var[r,...i]=t,o=r,{parser:l,fallbackLocale:n}=o,u=P(o,["parser","fallbackLocale"]),[s]=i;return(h,m,..._)=>W(d({parser:l,key:m,params:_,translations:s,locale:h,fallbackLocale:n},u.hasOwnProperty("fallbackValue")?{fallbackValue:u.fallbackValue}:{}))})),{get:(t,r,...i)=>f(this.l)(t,r,...i)}),this.getLocale=t=>{let{fallbackLocale:r}=f(this.config)||{},i=t||r;if(!i)return;let o=this.locales.get();return o.find(l=>b(i).includes(l))||o.find(l=>b(r).includes(l))},this.setLocale=t=>{if(t&&t!==f(this.internalLocale))return p.debug(`Setting '${t}' locale.`),this.internalLocale.set(t),this.loading.toPromise(t,f(this.currentRoute))},this.setRoute=t=>{if(t!==f(this.currentRoute)){p.debug(`Setting '${t}' route.`),this.currentRoute.set(t);let r=f(this.internalLocale);return this.loading.toPromise(r,t)}},this.loadConfig=async t=>{await this.configLoader(t)},this.getTranslationProps=async(t=this.locale.get(),r=f(this.currentRoute))=>{let i=f(this.config);if(!i||!t)return[];let o=this.translations.get(),{loaders:l,fallbackLocale:n="",cache:u=G}=i||{},s=Number.isNaN(+u)?G:+u;this.cachedAt?Date.now()>s+this.cachedAt&&(p.debug("Refreshing cache."),this.loadedKeys={},this.cachedAt=0):(p.debug("Setting cache timestamp."),this.cachedAt=Date.now());let[h,m]=b(t,n),_=o[h],T=o[m],j=(l||[]).map(v=>{var O=v,{locale:V}=O,g=P(O,["locale"]);return y(d({},g),{locale:b(V)[0]})}).filter(({routes:v})=>!v||(v||[]).some(ye(r))).filter(({key:v,locale:O})=>O===h&&(!_||!(this.loadedKeys[h]||[]).includes(v))||n&&O===m&&(!T||!(this.loadedKeys[m]||[]).includes(v)));if(j.length){this.isLoading.set(!0),p.debug("Fetching translations...");let v=await ve(j);this.isLoading.set(!1);let O=Object.keys(v).reduce((g,L)=>y(d({},g),{[L]:Object.keys(v[L])}),{}),V=j.filter(({key:g,locale:L})=>(O[L]||[]).some(R=>`${R}`.startsWith(g))).reduce((g,{key:L,locale:R})=>y(d({},g),{[R]:[...g[R]||[],L]}),{});return[v,V]}return[]},this.addTranslations=(t,r)=>{if(!t)return;let i=f(this.config),{preprocess:o}=i||{};p.debug("Adding translations...");let l=Object.keys(t||{});this.privateRawTranslations.update(n=>l.reduce((u,s)=>y(d({},u),{[s]:d(d({},u[s]||{}),t[s])}),n)),this.privateTranslations.update(n=>l.reduce((u,s)=>{let h=!0,m=t[s];return typeof o=="function"&&(m=o(m)),(typeof o=="function"||o==="none")&&(h=!1),y(d({},u),{[s]:d(d({},u[s]||{}),h?D(m,o==="preserveArrays"):m)})},n)),l.forEach(n=>{let u=Object.keys(t[n]).map(s=>`${s}`.split(".")[0]);r&&(u=r[n]),this.loadedKeys[n]=Array.from(new Set([...this.loadedKeys[n]||[],...u||[]]))})},this.loader=async([t,r])=>{let i=this.getLocale(t)||void 0;p.debug(`Adding loader promise for '${i}' locale and '${r}' route.`);let o=(async()=>{let l=await this.getTranslationProps(i,r);l.length&&this.addTranslations(...l)})();this.promises.add({locale:i,route:r,promise:o}),o.then(()=>{i&&this.locale.get()!==i&&this.locale.forceSet(i)})},this.loadTranslations=(t,r=f(this.currentRoute)||"")=>{let i=this.getLocale(t);if(i)return this.setRoute(r),this.setLocale(i),this.loading.toPromise(i,r)},this.loaderTrigger.subscribe(this.loader),this.isLoading.subscribe(async t=>{t&&this.promises.size&&(await this.loading.toPromise(),this.promises.clear(),p.debug("Loader promises have been purged."))}),a&&this.loadConfig(a)}async configLoader(a){if(!a)return p.error("No config provided!");let t=a,{initLocale:r,fallbackLocale:i,translations:o,log:l}=t,n=P(t,["initLocale","fallbackLocale","translations","log"]);l&&he(Z(l)),[r]=b(r),[i]=b(i),p.debug("Setting config."),this.config.set(d({initLocale:r,fallbackLocale:i,translations:o},n)),o&&this.addTranslations(o),r&&await this.loadTranslations(r)}},ee=Object.defineProperty,be=Object.defineProperties,_e=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,te=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable,J=(e,a,t)=>a in e?ee(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,k=(e,a)=>{for(var t in a||(a={}))te.call(a,t)&&J(e,t,a[t]);if(x)for(var t of x(a))re.call(a,t)&&J(e,t,a[t]);return e},z=(e,a)=>be(e,_e(a)),$=(e,a)=>{var t={};for(var r in e)te.call(e,r)&&a.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&x)for(var r of x(e))a.indexOf(r)<0&&re.call(e,r)&&(t[r]=e[r]);return t},Oe=(e,a)=>{for(var t in a)ee(e,t,{get:a[t],enumerable:!0})},ae={};Oe(ae,{ago:()=>Te,currency:()=>Ve,date:()=>Ee,eq:()=>H,gt:()=>oe,gte:()=>je,lt:()=>ie,lte:()=>Le,ne:()=>ke,number:()=>$e});var F=(e,a)=>{let{modifierDefaults:t}=a||{},{[e]:r}=t||{};return r||{}},H=({value:e,options:a=[],defaultValue:t=""})=>(a.find(({key:r})=>`${r}`.toLowerCase()===`${e}`.toLowerCase())||{}).value||t,ke=({value:e,options:a=[],defaultValue:t=""})=>(a.find(({key:r})=>`${r}`.toLowerCase()!==`${e}`.toLowerCase())||{}).value||t,ie=({value:e,options:a=[],defaultValue:t=""})=>(a.sort((r,i)=>+r.key-+i.key).find(({key:r})=>+e<+r)||{}).value||t,oe=({value:e,options:a=[],defaultValue:t=""})=>(a.sort((r,i)=>+i.key-+r.key).find(({key:r})=>+e>+r)||{}).value||t,Le=({value:e,options:a=[],defaultValue:t=""})=>H({value:e,options:a,defaultValue:ie({value:e,options:a,defaultValue:t})}),je=({value:e,options:a=[],defaultValue:t=""})=>H({value:e,options:a,defaultValue:oe({value:e,options:a,defaultValue:t})}),$e=({value:e,props:a,defaultValue:t="",locale:r="",parserOptions:i})=>{if(!r)return"";let o=F("number",i),{maximumFractionDigits:l}=o,n=$(o,["maximumFractionDigits"]),u=(a==null?void 0:a.number)||{},{maximumFractionDigits:s=l||2}=u,h=$(u,["maximumFractionDigits"]);return new Intl.NumberFormat(r,k(z(k({},n),{maximumFractionDigits:s}),h)).format(+e||+t)},Ee=({value:e,props:a,defaultValue:t="",locale:r="",parserOptions:i})=>{if(!r)return"";let o=$(F("date",i),[]),l=$((a==null?void 0:a.date)||{},[]);return new Intl.DateTimeFormat(r,k(k({},o),l)).format(+e||+t)},K=[{key:"second",multiplier:1e3},{key:"minute",multiplier:60},{key:"hour",multiplier:60},{key:"day",multiplier:24},{key:"week",multiplier:7},{key:"month",multiplier:13/3},{key:"year",multiplier:12}],le=(e="",a="")=>new RegExp(`^${e}s?$`).test(a),we=e=>K.indexOf(K.find(({key:a})=>le(a,e))),Pe=(e,a)=>K.reduce(([t,r],{key:i,multiplier:o},l)=>{if(le(r,a))return[t,r];if(!r||l===we(r)+1){let n=Math.round(t/o);if(!r||Math.abs(n)>=1||a!=="auto")return[n,i]}return[t,r]},[e,""]),Te=({value:e,defaultValue:a="",locale:t="",props:r,parserOptions:i})=>{if(!t)return"";let o=F("ago",i),{format:l,numeric:n}=o,u=$(o,["format","numeric"]),s=(r==null?void 0:r.ago)||{},{format:h=l||"auto",numeric:m=n||"auto"}=s,_=$(s,["format","numeric"]),T=+e||+a,j=Pe(T,h);return new Intl.RelativeTimeFormat(t,k(z(k({},u),{numeric:m}),_)).format(...j)},Ve=({value:e,defaultValue:a="",locale:t="",props:r,parserOptions:i})=>{if(!t)return"";let o=F("currency",i),{ratio:l,currency:n}=o,u=$(o,["ratio","currency"]),s=(r==null?void 0:r.currency)||{},{ratio:h=l||1,currency:m=n}=s,_=$(s,["ratio","currency"]);return new Intl.NumberFormat(t,k(z(k({},u),{style:"currency",currency:m}),_)).format(h*(e||a))},Re=e=>typeof e=="string"&&/{{(?:(?!{{|}}).)+}}/.test(e),M=e=>typeof e=="string"?e.replace(/\\(?=:|;|{|})/g,""):e,Ae=({value:e,props:a,payload:t,parserOptions:r,locale:i})=>`${e}`.replace(/{{\s*(?:(?!{{|}}).)+\s*}}/g,o=>{let l=M(`${o.match(/(?!{|\s).+?(?!\\[:;]).(?=\s*(?:[:;]|}}$))/)}`),n=t==null?void 0:t[l],[,u=""]=o.match(/.+?(?!\\;).;\s*default\s*:\s*([^\s:;].+?(?:\\[:;]|[^;}])*)(?=\s*(?:;|}}$))/i)||[];u=u||(t==null?void 0:t.default)||"";let[,s=""]=o.match(/{{\s*(?:[^;]|(?:\\;))+\s*(?:(?!\\:).[:])\s*(?!\s)((?:\\;|[^;])+?)(?=\s*(?:[;]|}}$))/i)||[];if(n===void 0&&s!=="ne")return u;let h=!!s,{customModifiers:m}=r||{},_=k(k({},ae),m||{});s=Object.keys(_).includes(s)?s:"eq";let T=_[s],j=(o.match(/[^\s:;{](?:[^;]|\\[;])+[^:;}]/gi)||[]).reduce((v,O,V)=>{if(V>0){let g=M(`${O.match(/(?:(?:\\:)|[^:])+/)}`.trim()),L=`${O.match(/(?:(?:\\:)|[^:])+$/)}`.trimStart();if(g&&g!=="default"&&L)return[...v,{key:g,value:L}]}return v},[]);return!h&&!j.length?n:T({value:n,options:j,props:a,defaultValue:u,locale:i,parserOptions:r})}),ne=({value:e,props:a,payload:t,parserOptions:r,locale:i})=>{if(Re(e)){let o=Ae({value:e,payload:t,props:a,parserOptions:r,locale:i});return ne({value:o,payload:t,props:a,parserOptions:r,locale:i})}else return M(e)},De=e=>({parse:(a,[t,r],i,o)=>(t!=null&&t.default&&a===void 0&&(a=t.default),a===void 0&&(a=o),ne({value:a,payload:t,props:r,parserOptions:e,locale:i}))}),Ie=De,xe=Object.defineProperty,Ne=Object.defineProperties,Se=Object.getOwnPropertyDescriptors,N=Object.getOwnPropertySymbols,se=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable,Q=(e,a,t)=>a in e?xe(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,Fe=(e,a)=>{for(var t in a||(a={}))se.call(a,t)&&Q(e,t,a[t]);if(N)for(var t of N(a))ue.call(a,t)&&Q(e,t,a[t]);return e},Ce=(e,a)=>Ne(e,Se(a)),Ke=(e,a)=>{var t={};for(var r in e)se.call(e,r)&&a.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&N)for(var r of N(e))a.indexOf(r)<0&&ue.call(e,r)&&(t[r]=e[r]);return t},U=e=>{var a=e,{parserOptions:t={}}=a,r=Ke(a,["parserOptions"]);return Ce(Fe({},r),{parser:Ie(t)})},Me=class extends ge{constructor(a){super(a&&U(a)),this.loadConfig=t=>super.configLoader(U(t))}},ze=Me;const He=Object.assign({"/i18n/en/a11y/dialog.json":()=>c(()=>import("./i18n_en.DpDSvn8e.js").then(e=>e.d),[]),"/i18n/en/a11y/donate.json":()=>c(()=>import("./i18n_en.DpDSvn8e.js").then(e=>e.a),[]),"/i18n/en/a11y/general.json":()=>c(()=>import("./i18n_en.DpDSvn8e.js").then(e=>e.g),[]),"/i18n/en/a11y/save.json":()=>c(()=>import("./i18n_en.DpDSvn8e.js").then(e=>e.s),[]),"/i18n/en/a11y/tabs.json":()=>c(()=>import("./i18n_en.DpDSvn8e.js").then(e=>e.t),[]),"/i18n/en/about.json":()=>c(()=>import("./i18n_en.DpDSvn8e.js").then(e=>e.b),[]),"/i18n/en/button.json":()=>c(()=>import("./i18n_en.DpDSvn8e.js").then(e=>e.c),[]),"/i18n/en/dialog.json":()=>c(()=>import("./i18n_en.DpDSvn8e.js").then(e=>e.e),[]),"/i18n/en/donate.json":()=>c(()=>import("./i18n_en.DpDSvn8e.js").then(e=>e.f),[]),"/i18n/en/error.json":()=>c(()=>import("./i18n_en.DpDSvn8e.js").then(e=>e.h),[]),"/i18n/en/general.json":()=>c(()=>import("./i18n_en.DpDSvn8e.js").then(e=>e.i),[]),"/i18n/en/notification.json":()=>c(()=>import("./i18n_en.DpDSvn8e.js").then(e=>e.n),[]),"/i18n/en/receiver.json":()=>c(()=>import("./i18n_en.DpDSvn8e.js").then(e=>e.r),[]),"/i18n/en/remux.json":()=>c(()=>import("./i18n_en.DpDSvn8e.js").then(e=>e.j),[]),"/i18n/en/save.json":()=>c(()=>import("./i18n_en.DpDSvn8e.js").then(e=>e.k),[]),"/i18n/en/settings.json":()=>c(()=>import("./i18n_en.DpDSvn8e.js").then(e=>e.l),[]),"/i18n/en/tabs.json":()=>c(()=>import("./i18n_en.DpDSvn8e.js").then(e=>e.m),[]),"/i18n/en/updates.json":()=>c(()=>import("./i18n_en.DpDSvn8e.js").then(e=>e.u),[]),"/i18n/ru/a11y/general.json":()=>c(()=>import("./i18n_ru.OaIcRmEI.js").then(e=>e.g),[]),"/i18n/ru/a11y/save.json":()=>c(()=>import("./i18n_ru.OaIcRmEI.js").then(e=>e.s),[]),"/i18n/ru/a11y/tabs.json":()=>c(()=>import("./i18n_ru.OaIcRmEI.js").then(e=>e.t),[]),"/i18n/ru/general.json":()=>c(()=>import("./i18n_ru.OaIcRmEI.js").then(e=>e.a),[]),"/i18n/ru/save.json":()=>c(()=>import("./i18n_ru.OaIcRmEI.js").then(e=>e.b),[]),"/i18n/ru/tabs.json":()=>c(()=>import("./i18n_ru.OaIcRmEI.js").then(e=>e.c),[])}),S={};for(const[e,a]of Object.entries(He)){const[,,t,...r]=e.split("/"),i=r.map(o=>o.replace(".json","")).join(".");S[t]={...S[t],[i]:a}}const qe="en",A=ce,We={fallbackLocale:qe,translations:Object.keys(S).reduce((e,a)=>(A[a]??(A[a]=`${a} (missing name)`),{...e,[a]:{languages:A}}),{}),loaders:Object.entries(S).map(([e,a])=>Object.entries(a).map(([t,r])=>({locale:e,key:t,loader:()=>r().then(i=>i.default)}))).flat()},{t:Ye,loading:Ze,locales:et,locale:tt,translations:rt,loadTranslations:at,addTranslations:it,setLocale:ot,setRoute:lt}=new ze(We);export{tt as INTERNAL_locale,it as addTranslations,qe as defaultLocale,at as loadTranslations,Ze as loading,et as locales,ot as setLocale,lt as setRoute,Ye as t,rt as translations};
